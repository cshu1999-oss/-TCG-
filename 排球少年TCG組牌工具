<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ’çƒå°‘å¹´TCGçµ„ç‰Œå·¥å…·</title>
    <meta name="description" content="æ’çƒå°‘å¹´TCGçµ„ç‰Œå·¥å…· - ä¸Šå‚³å¡ç‰‡åœ–ç‰‡ï¼Œé»æ“Šæˆ–æ‹–æ‹½æ·»åŠ åˆ°ç‰Œçµ„ï¼">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            padding: 20px;
            background-image: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #e53935, #e35d5b);
            color: white;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }
        
        .main-content {
            display: flex;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .cards-section {
            flex: 3;
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
        }
        
        .deck-section {
            flex: 2;
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
        }
        
        .section-title {
            font-size: 1.6rem;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 3px solid #e53935;
            color: #e53935;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .section-title span {
            font-size: 1rem;
            color: #666;
            font-weight: normal;
        }
        
        .upload-area {
            border: 2px dashed #e53935;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            margin-bottom: 25px;
            background: #fff9f9;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .upload-area:hover {
            background: #ffeaea;
            border-color: #c62828;
        }
        
        .upload-icon {
            font-size: 3rem;
            color: #e53935;
            margin-bottom: 15px;
        }
        
        .upload-text {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #e53935;
            font-weight: 600;
        }
        
        .upload-hint {
            font-size: 0.9rem;
            color: #888;
        }
        
        #file-input {
            display: none;
        }
        
        .card-type-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .type-btn {
            padding: 8px 16px;
            background: #f1f1f1;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .type-btn.active {
            background: #e53935;
            color: white;
        }
        
        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            max-height: 600px;
            overflow-y: auto;
            padding: 10px;
            flex: 1;
        }
        
        .card {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
            border-color: #e53935;
        }
        
        .card.dragging {
            opacity: 0.7;
        }
        
        .card-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 12px;
            background: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 0.9rem;
        }
        
        .card-name {
            font-weight: 600;
            margin-bottom: 8px;
            color: #e53935;
            font-size: 0.95rem;
            word-break: break-word;
            width: 100%;
        }
        
        .card-type {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 5px;
            padding: 3px 8px;
            background: #f0f0f0;
            border-radius: 12px;
            display: inline-block;
        }
        
        .card-actions {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }
        
        .card-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .add-btn {
            background: #4caf50;
            color: white;
        }
        
        .remove-btn {
            background: #f44336;
            color: white;
        }
        
        .delete-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8rem;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .card:hover .delete-btn {
            opacity: 1;
        }
        
        .deck-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 18px;
            background: #f9f9f9;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
        }
        
        .deck-count {
            font-size: 1.3rem;
            font-weight: bold;
            color: #e53935;
        }
        
        .deck-types {
            font-size: 1rem;
            color: #666;
        }
        
        .deck-area {
            border: 2px dashed #e53935;
            border-radius: 10px;
            padding: 20px;
            min-height: 400px;
            background: #fff9f9;
            transition: all 0.3s;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .deck-area.drag-over {
            background: #ffeaea;
            border-color: #c62828;
        }
        
        .deck-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }
        
        .deck-card {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
            border: 1px solid #eee;
        }
        
        .deck-card-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 8px;
            background: #eee;
        }
        
        .deck-card-name {
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
            font-size: 0.85rem;
        }
        
        .deck-card-type {
            font-size: 0.75rem;
            color: #888;
            margin-bottom: 8px;
        }
        
        .deck-card-count {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 5px;
        }
        
        .count-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.8rem;
            transition: all 0.2s;
        }
        
        .count-number {
            font-weight: bold;
            color: #e53935;
            min-width: 20px;
            text-align: center;
        }
        
        .empty-deck {
            text-align: center;
            padding: 40px 20px;
            color: #888;
            font-style: italic;
            font-size: 1.1rem;
            grid-column: 1 / -1;
        }
        
        .deck-stats {
            margin-top: 25px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
        }
        
        .stats-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #e53935;
            font-weight: 600;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px dashed #e0e0e0;
        }
        
        .stat-item:last-child {
            border-bottom: none;
        }
        
        .stat-label {
            color: #666;
        }
        
        .stat-value {
            font-weight: 600;
            color: #e53935;
        }
        
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            background: #4caf50;
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1001;
            display: none;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .warning {
            background: #ff9800;
        }
        
        .error {
            background: #f44336;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
        }
        
        @media (max-width: 1200px) {
            .main-content {
                flex-direction: column;
            }
            
            .cards-container {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .cards-container {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .deck-info {
                flex-direction: column;
                gap: 10px;
            }
            
            .card-type-selector {
                justify-content: center;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>æ’çƒå°‘å¹´TCGçµ„ç‰Œå·¥å…·</h1>
            <p class="subtitle">ä¸Šå‚³å¡ç‰‡åœ–ç‰‡ï¼Œé»æ“Šæˆ–æ‹–æ‹½æ·»åŠ åˆ°ç‰Œçµ„ï¼</p>
        </header>
        
        <div class="main-content">
            <section class="cards-section">
                <h2 class="section-title">å¡ç‰‡åº« <span>é»æ“Šæˆ–æ‹–æ‹½å¡ç‰‡æ·»åŠ åˆ°ç‰Œçµ„</span></h2>
                
                <div class="upload-area" id="upload-area">
                    <div class="upload-icon">ğŸ“</div>
                    <div class="upload-text">é»æ“Šä¸Šå‚³å¡ç‰‡åœ–ç‰‡</div>
                    <div class="upload-hint">æ”¯æ´ JPG, PNG æ ¼å¼ï¼Œæª”æ¡ˆåç¨±å°‡ä½œç‚ºå¡ç‰‡åç¨±</div>
                    <input type="file" id="file-input" accept="image/*" multiple>
                </div>
                
                <div class="card-type-selector">
                    <button class="type-btn active" data-type="all">å…¨éƒ¨</button>
                    <button class="type-btn" data-type="karasuno">çƒé‡é«˜æ ¡</button>
                    <button class="type-btn" data-type="nekoma">éŸ³é§’é«˜æ ¡</button>
                    <button class="type-btn" data-type="aoba-johsai">é’è‘‰åŸè¥¿</button>
                    <button class="type-btn" data-type="fukurodani">æ¢Ÿè°·é«˜æ ¡</button>
                    <button class="type-btn" data-type="other">å…¶ä»–é«˜æ ¡</button>
                    <button class="type-btn" data-type="event">äº‹ä»¶</button>
                    <button class="type-btn" data-type="hvbp">HVBP</button>
                    <button class="type-btn" data-type="hvpr">HVPR</button>
                </div>
                
                <div class="cards-container" id="cards-container">
                    <div class="empty-card-message">æš«ç„¡å¡ç‰‡ï¼Œè«‹ä¸Šå‚³å¡ç‰‡åœ–ç‰‡</div>
                </div>
            </section>
            
            <section class="deck-section">
                <h2 class="section-title">æˆ‘çš„ç‰Œçµ„ <span id="deck-count">0/40</span></h2>
                
                <div class="deck-info">
                    <div class="deck-count">å¡ç‰‡æ•¸é‡: <span id="total-count">0</span>/40</div>
                    <div class="deck-types">äº‹ä»¶å¡: <span id="event-count">0</span>/8</div>
                </div>
                
                <div class="deck-area" id="deck-area">
                    <div class="deck-list" id="deck-list">
                        <div class="empty-deck">ç‰Œçµ„ç›®å‰æ˜¯ç©ºçš„ï¼Œè«‹å¾å·¦å´æ·»åŠ å¡ç‰‡</div>
                    </div>
                </div>
                
                <div class="deck-stats">
                    <div class="stats-title">ç‰Œçµ„çµ±è¨ˆ</div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">ç¸½å¡ç‰‡æ•¸:</span>
                            <span class="stat-value" id="stat-total">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">äº‹ä»¶å¡:</span>
                            <span class="stat-value" id="stat-event">0</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        
        <footer>
            <p>æ’çƒå°‘å¹´TCGçµ„ç‰Œå·¥å…· &copy; 2023 - è¼•é¬†æ§‹å»ºæ‚¨çš„å°ˆå±¬ç‰Œçµ„</p>
        </footer>
    </div>
    
    <!-- é€šçŸ¥ -->
    <div class="notification" id="notification"></div>

    <script>
        // å¡ç‰‡æ•¸æ“š
        let allCards = [];
        let currentDeck = [];
        let currentCardType = 'all';
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
        });
        
        // è¨­ç½®äº‹ä»¶ç›£è½å™¨
        function setupEventListeners() {
            // ä¸Šå‚³å€åŸŸé»æ“Š
            document.getElementById('upload-area').addEventListener('click', function() {
                document.getElementById('file-input').click();
            });
            
            // æª”æ¡ˆä¸Šå‚³
            document.getElementById('file-input').addEventListener('change', handleFileUpload);
            
            // å¡ç‰‡é¡å‹ç¯©é¸
            document.querySelectorAll('.type-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentCardType = this.dataset.type;
                    renderAllCards();
                });
            });
            
            // ç‰Œçµ„å€åŸŸæ‹–æ‹½äº‹ä»¶
            const deckArea = document.getElementById('deck-area');
            deckArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('drag-over');
            });
            
            deckArea.addEventListener('dragleave', function() {
                this.classList.remove('drag-over');
            });
            
            deckArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('drag-over');
                
                const cardId = e.dataTransfer.getData('text/plain');
                if (cardId) {
                    const card = allCards.find(c => c.id == cardId);
                    if (card) {
                        addToDeck(card);
                    }
                }
            });
        }
        
        // è™•ç†æª”æ¡ˆä¸Šå‚³
        function handleFileUpload(e) {
            const files = e.target.files;
            if (!files || files.length === 0) return;
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                if (!file.type.match('image.*')) continue;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    // å¾æª”æ¡ˆåç¨±æ¨æ¸¬å¡ç‰‡é¡å‹ï¼Œå¦‚æœç•¶å‰æœ‰é¸ä¸­åˆ†é¡å‰‡ä½¿ç”¨è©²åˆ†é¡
                    const fileName = file.name.replace(/\.[^/.]+$/, ""); // ç§»é™¤å‰¯æª”å
                    let type = currentCardType !== 'all' ? currentCardType : 'other';
                    
                    // å¦‚æœç•¶å‰æ˜¯"å…¨éƒ¨"åˆ†é¡ï¼Œå‰‡å˜—è©¦å¾æª”æ¡ˆåç¨±è­˜åˆ¥
                    if (currentCardType === 'all') {
                        if (fileName.includes('çƒé‡') || fileName.includes('karasuno')) {
                            type = 'karasuno';
                        } else if (fileName.includes('éŸ³é§’') || fileName.includes('nekoma')) {
                            type = 'nekoma';
                        } else if (fileName.includes('é’è‘‰åŸè¥¿') || fileName.includes('aoba')) {
                            type = 'aoba-johsai';
                        } else if (fileName.includes('æ¢Ÿè°·') || fileName.includes('fukurodani')) {
                            type = 'fukurodani';
                        } else if (fileName.includes('äº‹ä»¶') || fileName.includes('event')) {
                            type = 'event';
                        } else if (fileName.includes('HVBP')) {
                            type = 'hvbp';
                        } else if (fileName.includes('HVPR')) {
                            type = 'hvpr';
                        } else {
                            type = 'other';
                        }
                    }
                    
                    // æ·»åŠ åˆ°å¡ç‰‡åº«
                    allCards.push({
                        id: Date.now() + i,
                        name: fileName,
                        type: type,
                        image: e.target.result
                    });
                    
                    renderAllCards();
                    showNotification(`å·²æˆåŠŸæ·»åŠ å¡ç‰‡: ${fileName}`, 'success');
                };
                reader.readAsDataURL(file);
            }
            
            // é‡ç½®æª”æ¡ˆè¼¸å…¥ï¼Œå…è¨±ä¸Šå‚³ç›¸åŒæª”æ¡ˆ
            e.target.value = '';
        }
        
        // æ¸²æŸ“æ‰€æœ‰å¡ç‰‡
        function renderAllCards() {
            const container = document.getElementById('cards-container');
            container.innerHTML = '';
            
            let filteredCards = allCards;
            
            // æ‡‰ç”¨ç¯©é¸
            if (currentCardType !== 'all') {
                filteredCards = allCards.filter(card => card.type === currentCardType);
            }
            
            // æ¸²æŸ“å¡ç‰‡
            if (filteredCards.length === 0) {
                container.innerHTML = '<div class="empty-card-message" style="text-align:center; padding:40px; color:#888; grid-column:1/-1;">æš«ç„¡å¡ç‰‡ï¼Œè«‹ä¸Šå‚³å¡ç‰‡åœ–ç‰‡</div>';
                return;
            }
            
            filteredCards.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.dataset.id = card.id;
                cardElement.draggable = true;
                
                // è¨­ç½®æ‹–æ‹½æ•¸æ“š
                cardElement.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text/plain', card.id);
                    this.classList.add('dragging');
                });
                
                cardElement.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                });
                
                cardElement.innerHTML = `
                    <button class="delete-btn" data-id="${card.id}">Ã—</button>
                    <div class="card-image">
                        <img src="${card.image}" alt="${card.name}" style="width:100%; height:100%; object-fit:cover; border-radius:8px;">
                    </div>
                    <div class="card-name">${card.name}</div>
                    <div class="card-type">${getTypeText(card.type)}</div>
                    <div class="card-actions">
                        <button class="card-btn add-btn" data-id="${card.id}">+</button>
                    </div>
                `;
                
                // é»æ“Šæ·»åŠ åˆ°ç‰Œçµ„
                cardElement.querySelector('.add-btn').addEventListener('click', function(e) {
                    e.stopPropagation();
                    addToDeck(card);
                });
                
                // åˆªé™¤å¡ç‰‡
                cardElement.querySelector('.delete-btn').addEventListener('click', function(e) {
                    e.stopPropagation();
                    deleteCard(card.id);
                });
                
                container.appendChild(cardElement);
            });
        }
        
        // åˆªé™¤å¡ç‰‡
        function deleteCard(cardId) {
            if (confirm('ç¢ºå®šè¦åˆªé™¤æ­¤å¡ç‰‡å—ï¼Ÿ')) {
                // å¾å¡ç‰‡åº«ä¸­åˆªé™¤
                allCards = allCards.filter(card => card.id !== cardId);
                
                // å¾ç‰Œçµ„ä¸­åˆªé™¤
                currentDeck = currentDeck.filter(card => card.id !== cardId);
                
                // æ›´æ–°UI
                renderAllCards();
                updateDeckDisplay();
                
                showNotification('å¡ç‰‡å·²åˆªé™¤', 'success');
            }
        }
        
        // æ·»åŠ åˆ°ç‰Œçµ„
        function addToDeck(card) {
            // æª¢æŸ¥ç‰Œçµ„æ˜¯å¦å·²æ»¿
            if (currentDeck.length >= 40) {
                showNotification('ç‰Œçµ„å·²æ»¿ï¼æœ€å¤šåªèƒ½æ·»åŠ 40å¼µå¡ç‰‡ã€‚', 'error');
                return;
            }
            
            // æª¢æŸ¥äº‹ä»¶å¡æ•¸é‡é™åˆ¶
            if (card.type === 'event') {
                const eventCardCount = currentDeck.filter(c => c.type === 'event').length;
                if (eventCardCount >= 8) {
                    showNotification('äº‹ä»¶å¡æœ€å¤šåªèƒ½æ”¾8å¼µï¼', 'warning');
                    return;
                }
            }
            
            // æ·»åŠ åˆ°ç‰Œçµ„
            currentDeck.push({...card});
            
            // æ›´æ–°UI
            updateDeckDisplay();
            showNotification(`å·²æ·»åŠ å¡ç‰‡: ${card.name}`, 'success');
        }
        
        // å¾ç‰Œçµ„ä¸­ç§»é™¤å¡ç‰‡
        function removeFromDeck(cardId) {
            const index = currentDeck.findIndex(card => card.id === cardId);
            if (index !== -1) {
                currentDeck.splice(index, 1);
                updateDeckDisplay();
            }
        }
        
        // æ›´æ–°ç‰Œçµ„é¡¯ç¤º
        function updateDeckDisplay() {
            const deckList = document.getElementById('deck-list');
            const deckCount = document.getElementById('deck-count');
            const totalCount = document.getElementById('total-count');
            const eventCount = document.getElementById('event-count');
            
            // è¨ˆç®—äº‹ä»¶å¡æ•¸é‡
            const eventCardCount = currentDeck.filter(card => card.type === 'event').length;
            
            // æ›´æ–°è¨ˆæ•¸
            totalCount.textContent = currentDeck.length;
            eventCount.textContent = eventCardCount;
            deckCount.textContent = `${currentDeck.length}/40`;
            
            // æ›´æ–°ç‰Œçµ„åˆ—è¡¨
            if (currentDeck.length === 0) {
                deckList.innerHTML = '<div class="empty-deck">ç‰Œçµ„ç›®å‰æ˜¯ç©ºçš„ï¼Œè«‹å¾å·¦å´æ·»åŠ å¡ç‰‡</div>';
            } else {
                deckList.innerHTML = '';
                
                // æŒ‰å¡ç‰‡IDåˆ†çµ„
                const groupedCards = {};
                currentDeck.forEach(card => {
                    if (!groupedCards[card.id]) {
                        groupedCards[card.id] = {
                            card: card,
                            count: 1
                        };
                    } else {
                        groupedCards[card.id].count++;
                    }
                });
                
                // æ¸²æŸ“ç‰Œçµ„ä¸­çš„å¡ç‰‡
                Object.values(groupedCards).forEach(item => {
                    const deckCardElement = document.createElement('div');
                    deckCardElement.className = 'deck-card';
                    
                    deckCardElement.innerHTML = `
                        <div class="deck-card-image">
                            <img src="${item.card.image}" alt="${item.card.name}" style="width:100%; height:100%; object-fit:cover; border-radius:6px;">
                        </div>
                        <div class="deck-card-name">${item.card.name}</div>
                        <div class="deck-card-type">${getTypeText(item.card.type)}</div>
                        <div class="deck-card-count">
                            <button class="count-btn remove-btn" data-id="${item.card.id}">-</button>
                            <span class="count-number">${item.count}</span>
                            <button class="count-btn add-btn" data-id="${item.card.id}">+</button>
                        </div>
                    `;
                    
                    deckList.appendChild(deckCardElement);
                });
                
                // æ·»åŠ æŒ‰éˆ•çš„äº‹ä»¶ç›£è½å™¨
                document.querySelectorAll('.deck-card .add-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const cardId = parseInt(this.dataset.id);
                        const card = allCards.find(c => c.id === cardId);
                        if (card) addToDeck(card);
                    });
                });
                
                document.querySelectorAll('.deck-card .remove-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        removeFromDeck(parseInt(this.dataset.id));
                    });
                });
            }
            
            // æ›´æ–°çµ±è¨ˆä¿¡æ¯
            updateDeckStats();
        }
        
        // æ›´æ–°ç‰Œçµ„çµ±è¨ˆ
        function updateDeckStats() {
            // è¨ˆç®—äº‹ä»¶å¡æ•¸é‡
            const eventCount = currentDeck.filter(card => card.type === 'event').length;
            
            document.getElementById('stat-total').textContent = currentDeck.length;
            document.getElementById('stat-event').textContent = eventCount;
        }
        
        // é¡¯ç¤ºé€šçŸ¥
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification';
            
            if (type === 'warning') {
                notification.classList.add('warning');
            } else if (type === 'error') {
                notification.classList.add('error');
            }
            
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        // è¼”åŠ©å‡½æ•¸ï¼šç²å–é¡å‹æ–‡æœ¬
        function getTypeText(type) {
            const typeMap = {
                'karasuno': 'çƒé‡é«˜æ ¡',
                'nekoma': 'éŸ³é§’é«˜æ ¡',
                'aoba-johsai': 'é’è‘‰åŸè¥¿',
                'fukurodani': 'æ¢Ÿè°·é«˜æ ¡',
                'other': 'å…¶ä»–é«˜æ ¡',
                'event': 'äº‹ä»¶',
                'hvbp': 'HVBP',
                'hvpr': 'HVPR'
            };
            return typeMap[type] || type;
        }
    </script>
</body>
</html>
